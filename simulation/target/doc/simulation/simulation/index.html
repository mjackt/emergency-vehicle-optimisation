<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Module containing all methods related to the police response simulation."><title>simulation::simulation - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="simulation" data-themes="" data-resource-suffix="" data-rustdoc-version="1.80.1 (3f5fd8dd4 2024-08-06)" data-channel="1.80.1" data-search-js="search-d52510db62a78183.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../simulation/index.html">simulation</a><span class="version">0.1.0</span></h2></div><h2 class="location"><a href="#">Module simulation</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#functions">Functions</a></li></ul></section><h2><a href="../index.html">In crate simulation</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">simulation</a>::<wbr><a class="mod" href="#">simulation</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../src/simulation/simulation.rs.html#1-420">source</a> Â· <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Module containing all methods related to the police response simulation.</p>
<p>The simulation can be explained as such:</p>
<ol>
<li>Spawn new incidents using the <code>spawn_stack</code> incident schedule</li>
<li>Dispatch vehicles to incidents as efficiently as possible</li>
<li>Step the simulation and vehciles using the desired timstep</li>
<li>If the time &lt; end_time:
Go back to the start
Else:
Sum and return performance metrics</li>
</ol>
<p>The simulation has been designed to run as efficiently as possible by using serveral concepts:</p>
<h6 id="hash-maps"><a class="doc-anchor" href="#hash-maps">Â§</a>Hash Maps</h6>
<p>Due to the large amount of items and info being stored, hash maps are used pretty much everywhere to achieve O(1) accessing.</p>
<h6 id="route-caching"><a class="doc-anchor" href="#route-caching">Â§</a>Route Caching</h6>
<p>Route calculations are done using Dijkstra and all knowledge gained from a Dijkstra run is cached in a HashMap.
Before performing any calculations, this cache is checked to see if the calculation has been performed before and therefore doesnâ€™t need to be done again.</p>
<h6 id="incident-plan"><a class="doc-anchor" href="#incident-plan">Â§</a>Incident Plan</h6>
<p>Predetermining the incident plan provides a fair test for all solutions. However it also has a couple performance boosts:</p>
<ul>
<li>Makes route caching insanely powerful. If the incidents are always in the same place then journeys will be similar accross all solutions. Therefore caching is utilised to the maximum.</li>
<li>Removes need to randomly generate new incidents for every simulation.</li>
</ul>
<h6 id="travel-simplification"><a class="doc-anchor" href="#travel-simplification">Â§</a>Travel simplification</h6>
<p>A vehicle will always store the cost of itâ€™s latest journey. Then if a vehcile has just left base and now wants to return to base, it will just use this last travel cost value for the reverse journey rather than recalculating the new cost.</p>
</div></details><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.calc_travel_time.html" title="fn simulation::simulation::calc_travel_time">calc_travel_time</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Calculates travel time from source to target or uses cache.</div></li><li><div class="item-name"><a class="fn" href="fn.dijkstra.html" title="fn simulation::simulation::dijkstra">dijkstra</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Performs a dijkstra algorithm. Terminates after target is located.</div></li><li><div class="item-name"><a class="fn" href="fn.dispatching.html" title="fn simulation::simulation::dispatching">dispatching</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Dispatches vehicles to active incidents.</div></li><li><div class="item-name"><a class="fn" href="fn.evaluate.html" title="fn simulation::simulation::evaluate">evaluate</a></div><div class="desc docblock-short">Evaluates a solution.</div></li><li><div class="item-name"><a class="fn" href="fn.generate_incidents.html" title="fn simulation::simulation::generate_incidents">generate_incidents</a></div><div class="desc docblock-short">Generates incidents based on probabilistic occurrence rates.</div></li><li><div class="item-name"><a class="fn" href="fn.run.html" title="fn simulation::simulation::run">run</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Runs the simulation once.</div></li><li><div class="item-name"><a class="fn" href="fn.spawn_incidents.html" title="fn simulation::simulation::spawn_incidents">spawn_incidents</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Adds incidents to the list of active ones. They are spawned from the spawn stack.</div></li><li><div class="item-name"><a class="fn" href="fn.step_vehicles.html" title="fn simulation::simulation::step_vehicles">step_vehicles</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Completes a timestep on each vehicle</div></li><li><div class="item-name"><a class="fn" href="fn.update_route_cache.html" title="fn simulation::simulation::update_route_cache">update_route_cache</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Adds new calculation knowledge into the route cache</div></li></ul></section></div></main></body></html>